# Day 1b


Your calculation isn’t quite right. It looks like some of the digits are
actually spelled out with letters: one, two, three, four, five, six,
seven, eight, and nine also count as valid “digits”.

Equipped with this new information, you now need to find the real first
and last digit on each line. For example:

    two1nine
    eightwothree
    abcone2threexyz
    xtwone3four
    4nineeightseven2
    zoneight234
    7pqrstsixteen

In this example, the calibration values are 29, 83, 13, 24, 42, 14, and
76. Adding these together produces 281.

What is the sum of all of the calibration values?

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

``` python
from aocd import get_data
inp = get_data(day=1, year=2023)
```

``` python
xs = inp.splitlines()
```

``` python
xs[:5]
```

    ['five8b', '2733vmmpknvgr', '3oneeighttwo', 'twofourfive485', '2fourghsixptk']

``` python
x =xs[2]
x
```

    '3oneeighttwo'

``` python
[o[index:] for index,o in enumerate(x)]
```

    ['3', '', '', '', '', '', '', '', '', '', '', '']

``` python
[x[index:] for index,o in enumerate(x)]
```

    ['3oneeighttwo',
     'oneeighttwo',
     'neeighttwo',
     'eeighttwo',
     'eighttwo',
     'ighttwo',
     'ghttwo',
     'httwo',
     'ttwo',
     'two',
     'wo',
     'o']

``` python
dnames='zero,one,two,three,four,five,six,seven,eight,nine'.split(',')
dnames
```

    ['zero',
     'one',
     'two',
     'three',
     'four',
     'five',
     'six',
     'seven',
     'eight',
     'nine']

``` python
a='eight234'
[o for o in dnames if a.startswith(o)]
```

    ['eight']

``` python
def dig_starts(a):
    return [o for o in dnames if a.startswith(o)]
```

``` python
dig_starts('eight234')
```

    ['eight']

``` python
starts = [x[index:] for index,o in enumerate(x)]
```

``` python
[dig_starts(o) for o in starts]
```

    [[], ['one'], [], [], ['eight'], [], [], [], [], ['two'], [], []]

**AI Prompt**

remind me where we are up to? where should we go next?

**AI Response**

I see you’re working on Advent of Code 2023, Day 1, part 2. You’re
working with strings that contain both numeric digits and spelled-out
numbers, and need to find the first and last digit (including
spelled-out numbers) in each string.

You’ve made good progress: 1. You’ve loaded the data and can access
individual strings 2. You’ve created a list of digit names 3. You’ve
written a `dig_starts` function to check if a string starts with a digit
name 4. You’re generating all possible substrings using string slicing

The next step would be to combine this with checking for actual digits
(0-9) as well as the spelled-out numbers. Would you like help thinking
through how to do that?

``` python
dnames.index('eight')
```

    8

``` python
dnames
```

    ['zero',
     'one',
     'two',
     'three',
     'four',
     'five',
     'six',
     'seven',
     'eight',
     'nine']

``` python
found = [dig_starts(o) for o in starts]
found
```

    [[], ['one'], [], [], ['eight'], [], [], [], [], ['two'], [], []]

``` python
for o in found:
    if o: print(dnames.index(o[0]))
```

    1
    8
    2

``` python
for o in found:
    if o: print(dnames.index(o[0]))
```

    1
    8
    2

``` python
a
```

    'eight234'

``` python
dig_starts(a)
```

    ['eight']

``` python
dig_starts?
```

    Signature: dig_starts(a)
    Docstring: <no docstring>
    File:      ~/<ipython-input-1-57852e629243>
    Type:      function

``` python
dig_starts??
```

    Signature: dig_starts(a)
    Docstring: <no docstring>
    Source:   
    def dig_starts(a):
        return [o for o in dnames if a.startswith(o)]
    File:      ~/<ipython-input-1-57852e629243>
    Type:      function

``` python
def first_dig(starts):
    found=[dig_starts(o) for o in starts]
    if isinstance(found,int): return found
    for o in found:
        if o: return dnames.index(o[0])


first_dig(starts)
```

    1

``` python
def first_dig(starts):
    found=[dig_starts(o) for o in starts]
    
    for o in found:
        if isinstance(o,int): return o
        if o: return dnames.index(o[0])


first_dig(x)
```

``` python
def first_dig(x):
    starts = [x[o:] for o,p in enumerate(x)]
    found=[dig_starts(o) for o in starts]
    
    for o in found:
        if isinstance(o,int): return o
        if o: return dnames.index(o[0])


first_dig(x)
```

    1

``` python
x
```

    '3oneeighttwo'

``` python
first_dig('eight234')
```

    8

``` python
first_dig('eight234')
```

    8

``` python
found
```

    [[], ['one'], [], [], ['eight'], [], [], [], [], ['two'], [], []]

``` python
reversed(found)
```

    <list_reverseiterator at 0x708bc41a6530>

``` python
for i in reversed(found):
    print(i)
```

    []
    []
    ['two']
    []
    []
    []
    []
    ['eight']
    []
    []
    ['one']
    []

``` python
def get_digit(found):
    for o in found:
        if isinstance(o,int): return o
        if o: return dnames.index(o[0])
```

``` python
def first_dig(x):
    starts = [x[o:] for o,p in enumerate(x)]
    found=[dig_starts(o) for o in starts]
    first = get_digit(found)
    last  = get_digit(reversed(found))
    return first,last
```

``` python
def both_digits(x):
    starts = [x[o:] for o,p in enumerate(x)]
    found=[dig_starts(o) for o in starts]
    first = get_digit(found)
    last  = get_digit(reversed(found))
    return first,last
```

``` python
def both_digits(x):
    starts = [x[o:] for o,p in enumerate(x)]
    found=[dig_starts(o) for o in starts]
    first = get_digit(found)
    last  = get_digit(reversed(found))
    return first,last
```

``` python
both_digits(x)
```

    (1, 2)

``` python
x
```

    '3oneeighttwo'

``` python
def both_digits(x):
    starts = [x[o:] for o,p in enumerate(x)]
    found=[dig_starts(o) for o in starts]
    first = get_digit(found)
    last  = get_digit(reversed(found))
    return first*10+last
```

``` python
get_digit??
```

    Signature: get_digit(found)
    Docstring: <no docstring>
    Source:   
    def get_digit(found):
        for o in found:
            if isinstance(o,int): return o
            if o: return dnames.index(o[0])
    File:      ~/<ipython-input-1-1e837a1f2a96>
    Type:      function
